function submitHomeForm(){$("#scrape-form-home").on("submit",function(){console.log("submitted!"),$("#spinner").show();var e=$(this).serialize(),t=$("#scrape_job_url").val(),a=$("#datatable1").DataTable();window.table=a,$("#datatable1 tbody tr:first-child").remove();var o=new EventSource("/get-home-articles?"+e);window.event=o,$("html,body").animate({scrollTop:$("#section-features").offset().top-30},"slow"),$("#section-features>h2").text("Searching Articles From "+t),$(".url").text(t),$("#url").val(t);var s=0;return o.addEventListener("message",function(e){var t=a.rows().count(),o=t+1,n=JSON.parse(JSON.parse(e.data)),i=n.message,r=n.url,d=n.amount;if(void 0!=i){var c="";c+='  <div id="custom-notification-message-'+s+'" data-notify-close="true" data-notify-position="top-left" data-notify-type="success" data-notify-msg=\'<i class="icon-info-sign"></i> '+i+"'></div>",c+="",3==$("#messages #message-box").length&&$("#messages #message-box")[0].remove(),$("#messages").append(c),SEMICOLON.widget.notifications(jQuery("#custom-notification-message-"+s)),s+=1}void 0!=r&&a.row.add([o.toString(),"<a target='_blank' href='"+r.toString()+"'>"+r.toString()+"</a>","","","","","","",""]).draw(!1),void 0!=d&&$(".amount").text(d+" valid articles found!")},!1),o.addEventListener("error",function(e){e.eventPhase==EventSource.CLOSED&&(o.close(),$(".scrape-button").removeClass("hidden"),$("#spinner").hide())},!1),!1})}function homeScan(){$(".scrape-button").on("click",function(e){e.preventDefault(),$("#spinner").show(),table.order([0,"asc"]).draw();for(var t=[],a=0;a<5;a++)t.push(table.rows().data()[a][1].match(/href='(.+)'/)[0].replace("href=",""));var o=new EventSource("/home-scan?links="+encodeURIComponent(t.join(";")));$("#messages").empty();var s=0,n=0;return o.addEventListener("message",function(e){var t=JSON.parse(JSON.parse(e.data)),a=t.shares,o=t.message;if(void 0!=o){var i="";i+='  <div id="custom-notification-message-'+n+'" data-notify-close="true" data-notify-position="top-left" data-notify-type="success" data-notify-msg=\'<i class="icon-info-sign"></i> '+o+"'></div>",i+="",3==$("#messages #message-box").length&&$("#messages #message-box")[0].remove(),$("#messages").append(i),SEMICOLON.widget.notifications(jQuery("#custom-notification-message-"+n)),n+=1}void 0!=a&&(a=JSON.parse(a),data=table.row(s).data(),data[2]=a.total,data[3]=a.facebook,data[4]=a.twitter,data[5]=a.linkedin,data[6]=a.pinterest,data[7]=a.google,data[8]=a.comments,$("#datatable1").dataTable().fnUpdate(data,s,void 0,!1),s+=1)},!1),o.addEventListener("error",function(e){e.eventPhase==EventSource.CLOSED&&(o.close(),$("#spinner").hide(),$("#register").modal("show"))},!1),!1})}$(document).ready(function(){submitHomeForm(),homeScan()});