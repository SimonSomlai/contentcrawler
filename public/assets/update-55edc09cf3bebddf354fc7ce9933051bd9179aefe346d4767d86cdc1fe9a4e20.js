function updateWebsite(){$("#update-button").on("click",function(){console.log("ready for updatez!"),$("#spinner").show();var e=$(this).data("url"),t=new EventSource("/get-articles?scrape_job%5Burl%5D="+e);window.event=t;var a=0,n=0;return table.rows().clear().draw(),$("#datatable1 tbody tr:first-child").remove(),t.addEventListener("message",function(e){var t=table.rows().count(),o=t+1,d=JSON.parse(JSON.parse(e.data)),i=d.message,s=d.url,r=d.amount,u=d.shares;if(i!=undefined){var c="";c+='  <div id="custom-notification-message-'+a+'" data-notify-close="true" data-notify-position="top-left" data-notify-type="success" data-notify-msg=\'<i class="icon-info-sign"></i> '+i+"'></div>",c+="",3==$("#messages #message-box").length&&$("#messages #message-box")[0].remove(),$("#messages").append(c),SEMICOLON.widget.notifications(jQuery("#custom-notification-message-"+a)),a+=1}s!=undefined&&table.row.add([o.toString(),"<a target='_blank' href='"+s.toString()+"'>"+s.toString()+"</a>","","","","","","",""]).draw(!1),r!=undefined&&$(".amount").text(r+" valid articles found!"),u!=undefined&&(u=JSON.parse(u),data=table.row(n).data(),data[2]=u.total,data[3]=u.facebook,data[4]=u.twitter,data[5]=u.linkedin,data[6]=u.pinterest,data[7]=u.google,data[8]=u.comments,$("#datatable1").dataTable().fnUpdate(data,n,undefined,!1),n+=1)},!1),t.addEventListener("error",function(e){e.eventPhase==EventSource.CLOSED&&(t.close(),$("#spinner").hide())},!1),!1})}$(document).ready(function(){updateWebsite()});